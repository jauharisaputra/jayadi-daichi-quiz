<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRY OUT JLPT N4</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            background: #f4f7fb;
        }

        .container {
            max-width: 900px;
            margin: 30px auto;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
        }

        .home-btn {
            display: inline-block;
            padding: 8px 15px;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-size: 14px;
            transition: 0.3s;
            margin-bottom: 15px;
        }

        .home-btn:hover {
            background: #217dbb;
        }

        #timer {
            font-size: 20px;
            font-weight: bold;
            color: #e74c3c;
        }

        .progress-container {
            width: 100%;
            height: 12px;
            background: #ddd;
            border-radius: 20px;
            margin: 15px 0;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: #3498db;
            border-radius: 20px;
            transition: 0.3s;
        }

        .question {
            font-size: 20px;
            margin: 20px 0;
        }

        .options button {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            border-radius: 10px;
            border: 2px solid #3498db;
            background: white;
            cursor: pointer;
            font-size: 16px;
        }

        .options button.selected {
            background: #3498db;
            color: white;
        }

        .options button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .nav-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 6px;
            margin-top: 20px;
        }

        .nav-grid button {
            padding: 8px;
            border-radius: 6px;
            border: none;
            background: #ddd;
            cursor: pointer;
            font-size: 12px;
        }

        .nav-grid button.answered {
            background: #2ecc71;
            color: white;
        }

        .nav-grid button.current {
            background: #3498db;
            color: white;
        }

        .nav-grid button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        #result {
            margin-top: 30px;
            font-size: 18px;
            padding: 20px;
            border-radius: 12px;
            background: #ecf9f1;
            display: none;
        }

        .home-bottom {
            margin-top: 20px;
            text-align: center;
        }

        #loginBox {
            max-width: 500px;
            margin: 80px auto;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        #loginBox input {
            padding: 10px;
            width: 80%;
            margin: 10px 0;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }

        #loginBox button {
            padding: 12px 25px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .nav-grid {
                grid-template-columns: repeat(8, 1fr);
            }
        }
    </style>
</head>

<body>
    <div id="loginBox">
        <h2>ğŸ“ Login Ujian</h2>
        <input type="text" id="studentName" placeholder="Masukkan Nama Lengkap Anda">
        <br><br>
        <button onclick="startExam()">ğŸš€ Mulai Ujian</button>
    </div>

    <div class="container" id="examContainer" style="display:none;">
        <a href="index.html" class="home-btn">â¬… Kembali ke Beranda</a>
        <h1>ğŸ“š TRY OUT JLPT N4</h1>
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <div id="counter" style="font-size:18px; font-weight:bold;"></div>
            <div id="timer">70:00</div>
        </div>
        <div class="progress-container">
            <div class="progress-bar" id="progress"></div>
        </div>
        <div class="question" id="questionText"></div>
        <div class="options" id="options"></div>
        <div class="nav-grid" id="navGrid"></div>
        <button onclick="finishExam()" id="finishBtn"
            style="margin-top:20px; padding:12px 30px; background:#e74c3c; color:white; border:none; border-radius:10px; font-size:16px; cursor:pointer;">
            â¹ï¸ Selesai Ujian
        </button>
        <div id="result"></div>
        <div class="home-bottom">
            <a href="index.html" class="home-btn">ğŸ  Kembali ke Beranda</a>
        </div>
    </div>

    <script>
        const QUIZ_TIME = 4200; // 70 menit
        let timeLeft = QUIZ_TIME;
        let timer;
        let examFinished = false;
        let current = 0;
        let studentName = "";
        let attempt = 1;

        const questions = [
            // 1-30: TATA BAHASA + GOI (30 soal = 190 poin)
            {
                text: "1. å†¬ã«ã‚³ãƒ¼ãƒˆã‚’ç€ãªã„ã§æ­©ã„ã¦ã€ï¼ˆ ï¼‰ã®ã§ã™ã€‚",
                options: ["ã•ã‚€ã„", "ã•ã‚€ãã¦", "ã•ã‚€ã‹ã£ãŸ", "ã•ã‚€ããªã„"],
                answer: 1
            },
            {
                text: "2. ã“ã®å®¶ã¯ã€å…ˆæœˆï¼ˆ ï¼‰ã°ã‹ã‚Šã§ã™ã€‚",
                options: ["å»ºã¦ã‚‹", "å»ºã¦", "å»ºã¦ã¦", "å»ºã¦ãŸ"],
                answer: 3
            },
            {
                text: "3. ãŸãã•ã‚“å‹‰å¼·ã—ãŸï¼ˆ ï¼‰ã€å¤§å­¦ã®å…¥å­¦è©¦é¨“ã«ãŠã¡ã¾ã—ãŸã€‚",
                options: ["ã‹ã‚‰", "ã‚‰", "ã®ã«", "ãã¦ã‚‚"],
                answer: 2
            },
            {
                text: "4. æ¯ï¼ˆ ï¼‰æœã”é£¯ã‚’ä½œã£ã¦ã‚‚ã‚‰ã„ã¾ã—ãŸã€‚",
                options: ["ã¯", "ã«", "ã§", "ã¸"],
                answer: 1
            },
            {
                text: "5. ä¼šè­°ã®æ™‚é–“ï¼ˆ ï¼‰é…ã‚Œãªã„ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚",
                options: ["ã¯", "ã«", "ã‹ã‚‰", "ã¾ã§"],
                answer: 1
            },
            {
                text: "6. ãã®ä»•äº‹ã€ãœã²ç§ã«ï¼ˆ ï¼‰ãã ã•ã„ã€‚",
                options: ["ã—ã¦", "ã•ã‚Œã¦", "ã•ã›ã¦", "ã•ã›ã‚‰ã‚Œã¦"],
                answer: 2
            },
            {
                text: "7. æ¬¡ã®é§…ã§ã€é›»è»Šï¼ˆ ï¼‰ãŠã‚Šã¾ã™ã€‚",
                options: ["ã‚’", "ã¸", "ã«", "ã¯"],
                answer: 0
            },
            {
                text: "8. ã„ã£ã—ã‚‡ã‘ã‚“ã‚ã„è‹±èªã‚’ç·´ç¿’ã—ã¦ã€ï¼ˆ ï¼‰å¤–å›½ã«è¡ŒããŸã„ã§ã™ã€‚",
                options: ["ã‚„ã£ã¨", "ãŸã¶ã‚“", "ã™ã£ã‹ã‚Š", "ã„ã¤ã‹"],
                answer: 3
            },
            {
                text: "9. ã“ã‚Œã¯æš‘ã„ã‹ã‚‚ã—ã‚Œãªã„ã®ã§ã€ï¼ˆ ï¼‰ã»ã†ãŒã„ã„ã§ã™ã€‚",
                options: ["è¿‘ã¥ã", "è¿‘ã¥ã„ã¦", "è¿‘ã¥ã‹ãªã„", "è¿‘ã¥ã„ãŸ"],
                answer: 2
            },
            {
                text: "10. å‹‰å¼·ï¼ˆ ï¼‰è©¦é¨“ã«å‡ºã¾ã—ãŸã®ã§ã€ã‚„ã£ã±ã‚Šåˆæ ¼ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚",
                options: ["ã—ãªã„ã§", "ã—ãªãã¦ã‚‚", "ã—ãªã„", "ã—ãªã‘ã‚Œã°"],
                answer: 0
            },
            {
                text: "11. ãƒ‰ã‚¢ãŒï¼ˆ ï¼‰ã‚ã‚Šã¾ã™ã‹ã‚‰ã€å…¥ã‚Œã¾ã›ã‚“ã€‚",
                options: ["é–‹ã‘ã¦", "é–‰ã‚ã¦", "èã„ã¦", "é–ƒã„ã¦"],
                answer: 1
            },
            {
                text: "12. æ©Ÿæ¢°ã‚’ä½¿ã†ã¨ãã¯ã€ï¼ˆ ï¼‰ã‚’ã—ã¾ã™ã€‚",
                options: ["ç”°èˆ", "è‡ªè»¢è»Š", "æ‰‹è¢‹", "å›³æ›¸é¤¨"],
                answer: 2
            },
            {
                text: "13. æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã®ã§ã€ï¼ˆ ï¼‰ãŠå¾…ã¡ãã ã•ã„ã€‚",
                options: ["å°‘ã—", "ã—ã‚‡ã†ã—ã‚‡ã†", "ã¡ã‚‡ã£ã¨", "ãã£ã¨"],
                answer: 1
            },
            {
                text: "14. é³¥ãŒã©ã“ã‹ã¸ï¼ˆ ï¼‰ã—ã¾ã„ã¾ã—ãŸã€‚",
                options: ["æ³³ã„ã§", "é™ã£ã¦", "å‰²ã£ã¦", "é£›ã‚“ã§"],
                answer: 3
            },
            {
                text: "15. æ¥æœˆã‹ã‚‰ã€ãƒã‚¹ã«ä¹—ã‚‰ãªã„ã§ã€ï¼ˆ ï¼‰ã“ã¨ã«ã—ã¾ã™ã€‚",
                options: ["æ­©ã„ã¦", "æ­©ã„ãŸ", "æ­©ã", "æ­©ã"],
                answer: 2
            },
            {
                text: "16. æ¯æœã‚¸ãƒ§ã‚®ãƒ³ã‚°ã‚’ã—ãŸã‚‰ã€ï¼ˆ ï¼‰ãŒæ¸›ã‚Šã¾ã—ãŸã€‚",
                options: ["ä½“é‡", "æ°—åˆ†", "èº«é•·", "å¤©æ°—"],
                answer: 0
            },
            {
                text: "17. ã“ã®é‡èœã¯ï¼ˆ ï¼‰ã®ã§ã€ãŠã„ã—ããªã„ã§ã™ã€‚",
                options: ["ã‚ˆã‚ã—ã„", "è‹¦ã„", "ã†ã¾ã„", "çã—ã„"],
                answer: 1
            },
            {
                text: "18. ç§ãŒå¤§ä½¿é¤¨ã«æ¥ã‚‹ã¨ãã¯ã€ã¡ã‚‡ã†ã©ï¼ˆ ï¼‰ã®æ™‚é–“ã§é›»è»ŠãŒæ··ã‚“ã§ã„ã¾ã™ã€‚",
                options: ["ã‚µãƒ¼ãƒ“ã‚¹", "ã‚·ãƒ£ãƒ¼ãƒšãƒ³", "ãƒ¦ãƒ¼ãƒ¢ã‚¢", "ãƒ©ãƒƒã‚·ãƒ¥"],
                answer: 3
            },
            {
                text: "19. å‹é”ãŒã„ã‚‹ã‹ã‚‰ã€ä¸€äººã§ã‚‚ï¼ˆ ï¼‰ã‚ã‚Šã¾ã›ã‚“ã€‚",
                options: ["ã™ã°ã‚‰ã—ã", "ã•ã³ã—ã", "ã•ã‚€ã", "ã‚ãšã‚‰ã—ã"],
                answer: 1
            },
            {
                text: "20. ä»Šæœé£Ÿã¹ï¼ˆ ï¼‰ã‹ã‚‰ã€ãŠãªã‹ãŒã„ãŸã„ã§ã™ã€‚",
                options: ["ã™ãã‚‹", "ã™ãã¦", "ã™ããŸ", "ã™ããªã„"],
                answer: 1
            },
            {
                text: "21. ã“ã®ã‚µã‚¤ãƒ³ã¯<u>ã‚¿ãƒã‚³ã‚’å¸ã†ãª</u>ã¨ã„ã†æ„å‘³ã§ã™ã€‚",
                options: ["ç¦ç…™", "é§è»Š", "ä¸­æ­¢", "å‹¤å‹‰"],
                answer: 0
            },
            {
                text: "22. æ™‚é–“ãŒ<u>è¶³ã‚Šã¾ã™</u>ã€‚",
                options: ["ãµã ã‚“ã‚ã‚Šã¾ã™", "ãŸãã•ã‚“ã‚ã‚Šã¾ã™", "å°‘ã—ã‚ã‚Šã¾ã™", "ã„ã¤ã‚‚ã‚ã‚Šã¾ã™"],
                answer: 1
            },
            {
                text: "23. <u>é–“é•ã‚ãªã„ã‚ˆã†ã«ã€æ³¨æ„ã—ã¦ãã ã•ã„</u>ã€‚",
                options: ["æ°—ãŒã¤ã", "æ°—ã‚’ä»˜ã‘ã¦", "æ°—ã«ã—ãªã„", "æ°—ãŒãªããªã‚‹"],
                answer: 1
            },
            {
                text: "24. ã“ã®ã‚±ãƒ¼ã‚­ã€<u>ã†ã¾ã„</u>ã§ã™ã­ã€‚",
                options: ["ãŸã‹ã„", "ã‚„ã™ã„", "ãŠãŠã„", "ãŠã„ã—ã„"],
                answer: 3
            },
            {
                text: "25. ãã£ã¨ã€èª²é•·ã«ç›¸è«‡ã™ã‚‹<u>ãƒãƒ£ãƒ³ã‚¹</u>ãŒã‚ã‚Šã¾ã™ã‚ˆã€‚",
                options: ["æƒ…å ±", "æ–¹æ³•", "æ©Ÿä¼š", "å¿…è¦"],
                answer: 2
            },
            {
                text: "26. ã©ã†ããŸãã•ã‚“<u>å¬ã—ä¸ŠãŒã£ã¦</u>ãã ã•ã„ã€‚",
                options: ["é£Ÿã¹ã¦", "è¨€ã£ã¦", "èã„ã¦", "èª­ã‚“ã§"],
                answer: 0
            },
            {
                text: "27. é›¨ãŒã²ã©ãé™ã£ã¦ããŸã€‚<u>ãã‚Œã§</u>ã€ç§ãŸã¡ã¯å±‹å†…ã§éŠã‚“ã ã€‚",
                options: ["ãã—ã¦", "ãã‚Œã‹ã‚‰", "ã§ã‚‚", "ã§ã™ã‹ã‚‰"],
                answer: 3
            },
            {
                text: "28. éƒ¨å±‹ã§<u>å¯ãŸã°ã‹ã‚Š</u>ã§ã™ã€‚",
                options: ["å¯ãªã„", "å¯ãŸã„ã§ã™", "ã™ãå¯ã‚‹", "ã•ã£ãå¯ãŸ"],
                answer: 3
            },
            {
                text: "29. å¤œç©ºã«æ˜ŸãŒ<u>è¼ã„ã¦ã„ã¾ã™</u>ã€‚",
                options: ["ãƒãƒ©ãƒãƒ©", "ãƒ¯ã‚¯ãƒ¯ã‚¯", "ãƒ‰ã‚­ãƒ‰ã‚­", "ã‚­ãƒ©ã‚­ãƒ©"],
                answer: 3
            },
            {
                text: "30. ç”ºã®äººã€…ã¯åœ°éœ‡ã«å¤§å¤‰<u>ã³ã£ãã‚Šã—ã¾ã—ãŸ</u>ã€‚",
                options: ["è¸Šã£ãŸ", "é©šã„ãŸ", "è½ã¡ãŸ", "æŠ¼ã—ãŸ"],
                answer: 1
            },

            // 31-46: DOKKAI (16 soal = 80 poin)
            {
                text: "31. ã©ã†ã—ã¦å¤§å­¦ç”Ÿã®ã¨ãã‚«ãƒ¡ãƒ©ã‚’è²·ã„ã¾ã—ãŸã‹ã€‚",
                options: ["ã‚«ãƒ¡ãƒ©ãŒå¥½ã", "NikonãŒå¥½ã", "å†™çœŸãŒå¥½ã", "å¤§å­¦ãŒå¥½ã"],
                answer: 2
            },
            {
                text: "32. ä»Šã‚¹ãƒãƒ›ã®ã‚«ãƒ¡ãƒ©ãŒã„ã„ç†ç”±ã¯ï¼Ÿ",
                options: ["ä¾¿åˆ©", "é‡ããªã„", "ã‚„ã£ã¨è²·ãˆãŸ", "å†™çœŸã‚’å–ã£ã¦ã„ã‚‹"],
                answer: 0
            },
            {
                text: "33. ãªãœã‚¹ã‚¤ãƒŸãƒ³ã‚°ã‚¹ã‚¯ãƒ¼ãƒ«ã«é€šã„ã¾ã—ãŸã‹ã€‚",
                options: ["æ°´æ³³ãŒå¥½ã", "ä¸Šæ‰‹ã«ãªã‚ŠãŸã„", "æ¯ãŒè¡Œã‹ã›ãŸ", "è¿‘æ‰€ã«ã‚ã‚‹"],
                answer: 1
            },
            {
                text: "34. ã©ã®ãã‚‰ã„é€šã„ã¾ã—ãŸã‹ã€‚",
                options: ["ä¸€å¹´é–“", "ä¸€é€±é–“ä¸€å›", "å­ä¾›ã®é ƒ", "å¤§äººã¾ã§"],
                answer: 0
            },
            {
                text: "35. èµ·ããŸå¾Œä½•ã‚’ã—ã¾ã—ãŸã‹ã€‚",
                options: ["ç›®ãŒè¦šã‚ãŸ", "å›½ã«å¸°ã£ãŸ", "å®¶ã‚’å‡ºãŸ", "ãƒ†ãƒ¬ãƒ“ã‚’ã¤ã‘ãŸ"],
                answer: 3
            },
            {
                text: "36. åˆã‚ã¦çµŒé¨“ã—ãŸã®ã¯ï¼Ÿ",
                options: ["æ—¥æœ¬ã®å¤œ", "ãƒ‹ãƒ¥ãƒ¼ã‚¹ã§åœ°éœ‡ã‚’è¦‹ã‚‹", "æ—¥æœ¬ã«æ¥ã‚‹", "åœ°éœ‡"],
                answer: 3
            },
            {
                text: "37. ãƒ‰ãƒªãƒ³ã‚¯ãƒãƒ¼ãŒã„ã„ç†ç”±ã¯ï¼Ÿ",
                options: ["è¦‹ãˆã‚‹", "å‹‰å¼·ã§ãã‚‹", "è‰²ã€…é£²ã‚ã‚‹", "ç¾å‘³ã—ã„"],
                answer: 2
            },
            {
                text: "38. ä½•ãŒé£²ã‚ã¾ã›ã‚“ã‹ã€‚",
                options: ["ã‚³ãƒ¼ãƒ’ãƒ¼", "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«", "ãŠèŒ¶", "ã‚³ãƒ¼ãƒ©"],
                answer: 1
            },
            {
                text: "39. ãƒªã‚µã‚¤ã‚¯ãƒ«ã‚·ãƒ§ãƒƒãƒ—ã§å£²ã£ã¦ã„ã‚‹ç‰©ã¯ï¼Ÿ",
                options: ["æ˜”ã®ç‰©", "å¤ã„ç‰©", "æ¬²ã—ã„ç‰©", "ä½¿ã‚ãªããªã£ãŸç‰©"],
                answer: 3
            },
            {
                text: "40. è²·ã£ã¦ãã‚Œãªã„ã®ã¯ï¼Ÿ",
                options: ["å®¶", "æœ", "ãƒ†ãƒ¬ãƒ“", "å®¶å…·"],
                answer: 0
            },
            {
                text: "41. é›»è»Šã®ä¸­ã§ä½•ã‚’è¦‹ã¾ã—ãŸã‹ã€‚",
                options: ["æ–°è", "å…è¨±", "è»Š", "åºƒå‘Š"],
                answer: 3
            },
            {
                text: "42. ã©ã“ã«è¡ŒããŸã„ï¼Ÿ",
                options: ["é›»è»Šã®ä¸­", "éŠåœ’åœ°", "æ•™ç¿’æ‰€", "ã‚¹ãƒ¼ãƒ‘ãƒ¼"],
                answer: 1
            },
            {
                text: "43. è¶£å‘³ã¯ä½•ã§ã™ã‹ã€‚",
                options: ["æœ¬ã‚’é›†ã‚ã‚‹", "æœ¬ã‚’æ›¸ã", "ãƒãƒªãƒ¼ãƒãƒƒã‚¿ãƒ¼ã‚’è¦‹ã‚‹", "èª­æ›¸"],
                answer: 3
            },
            {
                text: "44. æ‚©ã¿ã¯ä½•ã§ã™ã‹ã€‚",
                options: ["ç›®ãŒæ‚ªããªã£ãŸ", "æœ¬æ£šãŒæ¬²ã—ã„", "ã™ãå¯ã‚‹", "å€Ÿã‚ŠãŸã„æœ¬ãŒãªã„"],
                answer: 0
            },
            {
                text: "45. ãªãœé ­ãŒç†±ã„ï¼Ÿ",
                options: ["è±†è…ã‚’é£Ÿã¹ãŸ", "å¸ƒå›£ã«å…¥ã£ãŸ", "æ•ã‚’ä¹—ã›ãŸ", "ç†±ãŒã‚ã‚‹"],
                answer: 3
            },
            {
                text: "46. æ¬¡ã¯ä½•ã‚’ã—ã¾ã™ã‹ã€‚",
                options: ["å‹‰å¼·ã™ã‚‹", "å¯ã‚‹", "é£Ÿã¹ã‚‹", "éŠã¶"],
                answer: 0
            },

            // 47-66: KANJI (20 soal = 80 poin)
            {
                text: "47. ãŸã„ãµã†",
                options: ["å°æ‰€", "å…¬åœ’", "å°é¢¨", "ä¼šè­°"],
                answer: 2
            },
            {
                text: "48. ã‚ãŸã‚‰ã—ã„",
                options: ["é‡ã„", "è¦ªã—ã„", "å¤ã„", "æ–°ã—ã„"],
                answer: 3
            },
            {
                text: "49. ã¯ãŸã‚‰ã„ã¦",
                options: ["ä»˜ã„ã¦", "åƒã„ã¦", "å‹•ã„ã¦", "æ›¸ã„ã¦"],
                answer: 1
            },
            {
                text: "50. ã—ã‚Šã¾ã›ã‚“",
                options: ["åˆ‡ã‚Š", "å–ã‚Š", "èµ°ã‚Š", "çŸ¥ã‚Š"],
                answer: 3
            },
            {
                text: "51. ã§ã‚“ã‚",
                options: ["é›»å…‰", "é›»æ°—", "é›»è©±", "é›»è»Š"],
                answer: 2
            },
            {
                text: "52. ã¿ã˜ã‹ã„",
                options: ["å¤ªã„", "æš‘ã„", "çŸ­ã„", "å¯’ã„"],
                answer: 2
            },
            {
                text: "53. ãŠãã£ã¦",
                options: ["é€ã£ã¦", "é€šã£ã¦", "é…ã£ã¦", "èµ°ã£ã¦"],
                answer: 0
            },
            {
                text: "54. ã“ãˆ",
                options: ["é…", "å±‹", "æ‰‰", "å£°"],
                answer: 3
            },
            {
                text: "55. ã—ã”ã¨",
                options: ["äº‹å®Ÿ", "äº‹ä»¶", "ä»•äº‹", "è¨˜äº‹"],
                answer: 2
            },
            {
                text: "56. ã˜ã‚…ã†ã—ã‚‡",
                options: ["å ´æ‰€", "é•·æ‰€", "ä½æ‰€", "çŸ­æ‰€"],
                answer: 2
            },
            {
                text: "57. ãã‚‹ï¼ˆæœã‚’ï¼‰",
                options: ["åˆ‡ã‚‹", "ç€ã‚‹", "æ¶ˆã‚‹", "æ±ºã‚‹"],
                answer: 1
            },
            {
                text: "58. ã‹ã†",
                options: ["è²·ã†", "ä¼šã†", "æ­Œã†", "ä½¿ã†"],
                answer: 0
            },
            {
                text: "59. ãŠã‚ã‚‹",
                options: ["å§‹ã¾ã‚‹", "çµ‚ã‚ã‚‹", "å¸°ã‚ã‚‹", "å¤‰ã‚ã‚‹"],
                answer: 1
            },
            {
                text: "60. ãµã",
                options: ["æœ", "ç¦", "å‰¯", "å¹…"],
                answer: 0
            },
            {
                text: "61. ã¤ã‚ˆã„",
                options: ["å¼·ã„", "å¼±ã„", "å¤ªã„", "åºƒã„"],
                answer: 0
            },
            {
                text: "62. ãŠã¨",
                options: ["æ˜”", "éŸ³", "é’", "ç©º"],
                answer: 1
            },
            {
                text: "63. ã‹ã‚“ãŒãˆã‚‹",
                options: ["æ•™ãˆã‚‹", "ç­”ãˆã‚‹", "è€ƒãˆã‚‹", "ä¼ãˆã‚‹"],
                answer: 2
            },
            {
                text: "64. ã¯ãŸã‚‰ã",
                options: ["åƒã", "å‹•ã", "åŠ©ã", "ç¶šã"],
                answer: 0
            },
            {
                text: "65. ã—ã‘ã‚“",
                options: ["è©¦é¨“", "å®Ÿé¨“", "çµŒé¨“", "å±é™º"],
                answer: 0
            },
            {
                text: "66. ã¨ã—",
                options: ["éƒ½å¸‚", "å›³æ›¸", "å¹´", "ä¼šç¤¾"],
                answer: 2
            },

            // 67-74: KIJUTSU (8 soal = 80 poin)
            {
                text: "67. æ¥å¹´æ—¥æœ¬ã¸ï¼ˆ ï¼‰ã¤ã‚‚ã‚Šã§ã™ã€‚",
                options: ["è¡Œã", "è¡Œã", "è¡Œã£ãŸ", "è¡Œã£ã¦"],
                answer: 0
            },
            {
                text: "68. é›¨ãŒé™ã£ãŸï¼ˆ ï¼‰è©¦åˆã¯ä¸­æ­¢ã§ã™ã€‚",
                options: ["ã‹ã‚‰", "ã®ã§", "ã‚‰", "ãªã‚‰"],
                answer: 3
            },
            {
                text: "69. æ—¥æœ¬èªãŒè©±ã›ã‚‹ï¼ˆ ï¼‰ãªã‚ŠãŸã„ã§ã™ã€‚",
                options: ["ã‚ˆã†ã«", "ã¿ãŸã„ã«", "ãã†ã«", "ã‚‰ã—ã„"],
                answer: 0
            },
            {
                text: "70. ã“ã“ã§å†™çœŸã‚’ï¼ˆ ï¼‰ã‚‚ã„ã„ã§ã™ã‹ã€‚",
                options: ["æ’®ã‚‹", "æ’®ã£ã¦", "æ’®ã£ãŸ", "æ’®ã‚Š"],
                answer: 0
            },
            {
                text: "71. æ­£ã—ã„æ–‡ã‚’é¸ã³ãªã•ã„ã€‚",
                options: ["æ˜¥ã«ãªã£ãŸã‚‰æ¥å¹´æ—…è¡Œã«ã—ã¾ã—ã‚‡ã†", "æ¥å¹´æ—…è¡Œã«ãªã£ãŸã‚‰æ˜¥ã—ã¾ã—ã‚‡ã†", "æ¥å¹´æ˜¥ã«ãªã£ãŸã‚‰æ—…è¡Œã«ã—ã¾ã—ã‚‡ã†", "æ—…è¡Œæ¥å¹´æ˜¥ã«ãªã£ãŸã‚‰ã—ã¾ã—ã‚‡ã†"],
                answer: 2
            },
            {
                text: "72. æ­£ã—ã„æ–‡ã‚’é¸ã³ãªã•ã„ã€‚",
                options: ["ä¼šã†ã¨å‹ã ã¡ã«ã†ã‚Œã—ã„ã§ã™", "å‹ã ã¡ã«ä¼šã†ã¨ã†ã‚Œã—ã„ã§ã™", "ã†ã‚Œã—ã„ã§ã™å‹ã ã¡ã«ä¼šã†ã¨", "å‹ã ã¡ã†ã‚Œã—ã„ä¼šã†ã¨ã§ã™"],
                answer: 1
            },
            {
                text: "73. æ­£ã—ã„æ–‡ã‚’é¸ã³ãªã•ã„ã€‚",
                options: ["ã°ã‹ã‚Šé£Ÿäº‹ã‚’ã—ãŸã§ã™", "é£Ÿäº‹ã—ãŸã°ã‹ã‚Šã§ã™", "ã—ãŸé£Ÿäº‹ã°ã‹ã‚Šã§ã™", "é£Ÿäº‹ã‚’ã—ãŸã°ã‹ã‚Šã§ã™"],
                answer: 3
            },
            {
                text: "74. åœŸæ›œæ—¥ä½•ã‚’ã—ãŸã„ï¼Ÿ",
                options: ["å¸°ã£ã¦å¯ã‚‹", "åƒã", "æ¸©åº¦ã‚’è¨ˆã‚‹", "ã‚†ã£ãã‚Šä¼‘ã‚€"],
                answer: 3
            }
        ];

        let answers = new Array(questions.length).fill(null);

        // ANTI-CHEAT
        document.addEventListener("contextmenu", e => e.preventDefault());
        document.addEventListener("keydown", e => {
            if (e.key === "F12" || (e.ctrlKey && e.shiftKey && e.key === "I") ||
                (e.ctrlKey && e.key === "u") || (e.ctrlKey && e.key === "s") ||
                (e.ctrlKey && e.key === "a")) {
                e.preventDefault();
            }
        });
        document.addEventListener("copy", e => e.preventDefault());

        // FULLSCREEN DETECTION
        function openFullscreen() {
            const elem = document.documentElement;
            if (elem.requestFullscreen) elem.requestFullscreen();
            else if (elem.webkitRequestFullscreen) elem.webkitRequestFullscreen();
            else if (elem.msRequestFullscreen) elem.msRequestFullscreen();
        }

        document.addEventListener("fullscreenchange", function () {
            if (!document.fullscreenElement && !examFinished) {
                alert("âš ï¸ Anda keluar dari mode fullscreen!\nUjian akan diselesaikan otomatis.");
                finishExam(true);
            }
        });

        function startExam() {
            const name = document.getElementById("studentName").value.trim();
            if (!name) {
                alert("âŒ Masukkan nama terlebih dahulu!");
                return;
            }

            studentName = name;
            let savedAttempt = localStorage.getItem("attempt_" + name);
            attempt = savedAttempt ? parseInt(savedAttempt) + 1 : 1;
            localStorage.setItem("attempt_" + name, attempt);
            localStorage.removeItem('quiz_answers_' + name);

            document.getElementById("loginBox").style.display = "none";
            document.getElementById("examContainer").style.display = "block";
            openFullscreen();

            // RESET
            current = 0;
            answers = new Array(questions.length).fill(null);
            timeLeft = QUIZ_TIME;
            examFinished = false;

            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;

            generateNav();
            loadQuestion();
            startTimer();
        }

        function loadQuestion() {
            if (examFinished) return;
            const q = questions[current];
            document.getElementById("questionText").innerHTML = q.text;
            document.getElementById("counter").innerText = `Soal ${current + 1} / ${questions.length}`;

            document.getElementById("progress").style.width = ((current + 1) / questions.length * 100) + "%";

            const optionsDiv = document.getElementById("options");
            optionsDiv.innerHTML = "";

            q.options.forEach((opt, i) => {
                const btn = document.createElement("button");
                btn.innerText = String.fromCharCode(65 + i) + ". " + opt;
                if (answers[current] === i) btn.classList.add("selected");

                btn.onclick = () => {
                    if (examFinished) return;
                    answers[current] = i;
                    loadQuestion();
                    updateNav();
                };

                optionsDiv.appendChild(btn);
            });
        }

        function generateNav() {
            const nav = document.getElementById("navGrid");
            nav.innerHTML = "";
            for (let i = 0; i < questions.length; i++) {
                const btn = document.createElement("button");
                btn.innerText = i + 1;
                btn.onclick = () => {
                    if (examFinished) return;
                    current = i;
                    loadQuestion();
                };
                nav.appendChild(btn);
            }
        }

        function updateNav() {
            const buttons = document.querySelectorAll(".nav-grid button");
            buttons.forEach((btn, i) => {
                btn.classList.remove("answered", "current");
                if (answers[i] !== null) btn.classList.add("answered");
                if (i === current) btn.classList.add("current");
                if (examFinished) btn.disabled = true;
            });
        }

        function startTimer() {
            timer = setInterval(() => {
                if (examFinished) {
                    clearInterval(timer);
                    return;
                }
                timeLeft--;
                const min = Math.floor(timeLeft / 60);
                const sec = timeLeft % 60;
                document.getElementById("timer").innerText =
                    `${min < 10 ? "0" : ""}${min}:${sec < 10 ? "0" : ""}${sec}`;

                if (timeLeft <= 0) {
                    finishExam(true);
                }
            }, 1000);
        }

        function finishExam(timeUp = false) {
            if (examFinished) return;
            examFinished = true;
            clearInterval(timer);

            // OFFICIAL JLPT N4 SCORING
            let tataBahasa = 0,
                dokkai = 0,
                kanji = 0,
                kijutsu = 0;
            let score = 0;

            answers.forEach((a, i) => {
                if (a === questions[i].answer) {
                    score++;
                    if (i < 30) tataBahasa++; // 1-30: 30 soal = 190 pt
                    else if (i < 46) dokkai++; // 31-46: 16 soal = 80 pt
                    else if (i < 66) kanji++; // 47-66: 20 soal = 80 pt
                    else kijutsu++; // 67-74: 8 soal = 80 pt
                }
            });

            // Konversi nilai per kompetensi (0-100%)
            let nilaiTata = Math.round((tataBahasa / 30) * 100);
            let nilaiDokkai = Math.round((dokkai / 16) * 100);
            let nilaiKanji = Math.round((kanji / 20) * 100);
            let nilaiKijutsu = Math.round((kijutsu / 8) * 100);

            // Point calculation (official formula)
            let pointTata = Math.round(tataBahasa * 19 / 10); // 190 max (19/190Ã—10)
            let pointDokkai = Math.round(dokkai * 5); // 80 max (5 pt/soal)
            let pointKanji = Math.round(kanji * 4); // 80 max (4 pt/soal)
            let pointKijutsu = Math.round(kijutsu * 10); // 80 max (10 pt/soal)
            let totalPoint = pointTata + pointDokkai + pointKanji + pointKijutsu;
            let nilaiTotal = Math.round((totalPoint / 430) * 100); // 430 total max

            // Kirim ke Google Sheet
            fetch("https://script.google.com/macros/s/AKfycbxqRPorFRr1IfjElLrXguzkYXq6q0axIvviKhewdGZww4em31SHvmk3UIENMcI6Wtw1/exec", {
                method: "POST",
                mode: "no-cors",
                body: JSON.stringify({
                    nama: studentName,
                    attempt,
                    tataBahasa,
                    dokkai,
                    kanji,
                    kijutsu,
                    total: score,
                    nilai_tata: nilaiTata,
                    nilai_dokkai: nilaiDokkai,
                    nilai_kanji: nilaiKanji,
                    nilai_kijutsu: nilaiKijutsu,
                    nilai_total: nilaiTotal,
                    point_tata: pointTata,
                    point_dokkai: pointDokkai,
                    point_kanji: pointKanji,
                    point_kijutsu: pointKijutsu,
                    total_point: totalPoint
                })
            });

            // Lock UI
            document.querySelectorAll("button").forEach(btn => {
                btn.disabled = true;
                btn.style.opacity = "0.6";
                btn.style.cursor = "not-allowed";
            });

            // Tampilkan hasil
            document.getElementById("result").innerHTML = `
                <div style="text-align:center; padding:25px; background:#e8f5e8; border-radius:15px;">
                    <h2 style="color:#27ae60;">ğŸ‰ UJIAN SELESAI</h2>
                    <div style="font-size:18px; margin:15px 0;">
                        <b>ğŸ‘¤ Nama:</b> ${studentName} | <b>ğŸ”„ Attempt:</b> ${attempt}<br><br>
                        
                        ğŸ“ <b>Tata Bahasa:</b> ${tataBahasa}/30 (${nilaiTata}%) | ${pointTata}/190 pt<br>
                        ğŸ“– <b>Dokkai:</b> ${dokkai}/16 (${nilaiDokkai}%) | ${pointDokkai}/80 pt<br>
                        æ¼¢å­— <b>Kanji:</b> ${kanji}/20 (${nilaiKanji}%) | ${pointKanji}/80 pt<br>
                        âœï¸ <b>Kijutsu:</b> ${kijutsu}/8 (${nilaiKijutsu}%) | ${pointKijutsu}/80 pt<br><br>
                        
                        <div style="font-size:28px; color:#2c3e50; margin:20px 0; font-weight:bold;">
                            ğŸ“Š Total: ${totalPoint}/430 (${nilaiTotal}%)
                        </div>
                        <div style="font-size:22px; padding:15px 25px; border-radius:12px; 
                                   ${nilaiTotal >= 70 ? 'background:#d4edda; color:#155724;' : 'background:#f8d7da; color:#721c24;'} 
                                   border: 3px solid ${nilaiTotal >= 70 ? '#28a745' : '#dc3545'};">
                            ${nilaiTotal >= 70 ? "âœ… LULUS JLPT N4" : "ğŸ“š REMEDIAL"}
                        </div>
                    </div>
                </div>
            `;
            document.getElementById("result").style.display = "block";
            document.querySelector('.container').scrollTo(0, document.querySelector('#result').offsetTop);

            setTimeout(() => {
                alert((timeUp ? "â° Waktu Habis!\n\n" : "") +
                    `ğŸ‘¤ ${studentName}\nğŸ“Š ${totalPoint}/430 (${nilaiTotal}%)\nğŸ“œ ${nilaiTotal >= 70 ? "ğŸ‰ LULUS" : "ğŸ“š REMEDIAL"}`
                );
            }, 200);
        }
    </script>
</body>

</html>